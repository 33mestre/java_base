# ---------------------------------
# Use the OpenJDK 17 base image
# ---------------------------------
FROM openjdk:17-slim

# ---------------------------------
# Install necessary packages
# ---------------------------------
RUN apt-get update && apt-get install -y \
    python3 \
    python3-pip \
    python3-bs4 \
    libpango1.0-0 \
    wkhtmltopdf \
    libcairo2 \
    libgdk-pixbuf2.0-0 \
    libffi-dev

# ---------------------------------
# Install necessary Python packages
# ---------------------------------
RUN pip3 install markdown2 weasyprint pygments markdown pdfkit

# ---------------------------------
# Set the working directory inside the container
# ---------------------------------
WORKDIR /app

# ---------------------------------
# Copy the necessary files to the container
# ---------------------------------
COPY sys ./sys
COPY FUTURE2.md ./FUTURE2.md

# ---------------------------------
# Command to start the Python script
# ---------------------------------
CMD ["python3", "./sys/markdown_to_pdf.py"]
